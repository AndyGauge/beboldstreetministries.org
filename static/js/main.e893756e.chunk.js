(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(33)},19:function(e,t,a){},21:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},31:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(12),s=a.n(r),l=(a(19),a(5)),o=a(6),c=a(8),h=a(7),d=a(9),m=a(1),u=(a(21),a(2)),p=(a(29),a(31),"https://api.beboldstreetministries.org/v1/"),v=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={name:"",email:"",giving:"",street:"",city:"",province:"",zip:"",token:"",key:"",modal:!1,modalStatus:"",nameError:!1,emailError:!1,givingError:!1,streetError:!1,cityError:!1,provinceError:!1,zipError:!1,page:1},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleNameChange=a.handleNameChange.bind(Object(m.a)(Object(m.a)(a))),a.handleEmailChange=a.handleEmailChange.bind(Object(m.a)(Object(m.a)(a))),a.handleGivingChange=a.handleGivingChange.bind(Object(m.a)(Object(m.a)(a))),a.handleStreetChange=a.handleStreetChange.bind(Object(m.a)(Object(m.a)(a))),a.handleCityChange=a.handleCityChange.bind(Object(m.a)(Object(m.a)(a))),a.handleProvinceChange=a.handleProvinceChange.bind(Object(m.a)(Object(m.a)(a))),a.handleZipChange=a.handleZipChange.bind(Object(m.a)(Object(m.a)(a))),a.handleNext=a.handleNext.bind(Object(m.a)(Object(m.a)(a))),a.handleBack=a.handleBack.bind(Object(m.a)(Object(m.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a.updateToken=a.updateToken.bind(Object(m.a)(Object(m.a)(a))),a.hideModal=a.hideModal.bind(Object(m.a)(Object(m.a)(a))),a.showModal=a.showModal.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(p+"key",{method:"post"}).then(function(e){return e.json()}).then(function(t){return e.setState({key:t.code})})}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value,nameError:""})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value,emailError:""})}},{key:"handleGivingChange",value:function(e){this.setState({giving:e.target.value,givingError:""})}},{key:"handleStreetChange",value:function(e){this.setState({street:e.target.value,streetError:""})}},{key:"handleCityChange",value:function(e){this.setState({city:e.target.value,cityError:""})}},{key:"handleProvinceChange",value:function(e){this.setState({province:e.target.value,provinceError:""})}},{key:"handleZipChange",value:function(e){this.setState({zip:e.target.value,zipError:""})}},{key:"updateToken",value:function(e){e.token&&(this.setState({token:e.token.id}),this.handleNext())}},{key:"handleNext",value:function(e){var t=!0;this.state.name.match(/\w+\s\w/)||(t=!1,this.setState({nameError:!0})),this.state.email.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/)||(t=!1,this.setState({emailError:!0})),parseFloat(this.state.giving)>0||(t=!1,this.setState({givingError:!0})),t&&1==this.state.page&&this.setState({page:2})}},{key:"handleBack",value:function(e){2==this.state.page&&this.setState({page:1})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),"1"==this.state.page);else{var t=!0;this.state.street.length<3&&(t=!1,this.setState({streetError:!0})),this.state.city.length<1&&(t=!1,this.setState({cityError:!0})),this.state.province.match(/^[A-Za-z]{2}$/)||(t=!1,this.setState({provinceError:!0})),this.state.zip.match(/^[0-9]{5}$/)||(t=!1,this.setState({zipError:!0})),t&&this.sendToCrm()}}},{key:"sendToCrm",value:function(){var e=this,t=new FormData;t.append("payment",JSON.stringify({name:this.state.name,email:this.state.email,giving:this.state.giving,street:this.state.street,city:this.state.city,province:this.state.province,zip:this.state.zip,token:this.state.token,key:this.state.key})),fetch(p+"payment",{method:"post",body:t}).then(function(e){return e.json()}).then(function(t){return e.setState({modalStatus:t.message})}).then(function(t){return e.showModal()})}},{key:"showModal",value:function(){this.setState({modal:!0})}},{key:"hideModal",value:function(){this.setState({modal:!1})}},{key:"handleErrors",value:function(){alert("Cannot send to BBSM.")}},{key:"page1Style",value:function(){return 1==this.state.page?"collapse in show":"collapse"}},{key:"page2Style",value:function(){return 2==this.state.page?"collapse in show":"collapse"}},{key:"nameClass",value:function(){return this.state.nameError?"form-control is-invalid":"form-control"}},{key:"emailClass",value:function(){return this.state.emailError?"form-control is-invalid":"form-control"}},{key:"givingClass",value:function(){return this.state.givingError?"form-control is-invalid":"form-control"}},{key:"streetClass",value:function(){return this.state.streetError?"form-control is-invalid":"form-control"}},{key:"cityClass",value:function(){return this.state.cityError?"form-control is-invalid":"form-control"}},{key:"provinceClass",value:function(){return this.state.provinceError?"form-control is-invalid":"form-control"}},{key:"zipClass",value:function(){return this.state.zipError?"form-control is-invalid":"form-control"}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("h2",null,"My Pledge to BBSM"),i.a.createElement("form",{onSubmit:this.handleSubmit,className:"validate"},i.a.createElement("div",{id:"page1",className:this.page1Style()},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{for:"name"},"Full Name"),i.a.createElement("input",{type:"text",className:this.nameClass(),id:"name",placeholder:"First Last",value:this.state.name,onChange:this.handleNameChange}),i.a.createElement("div",{className:"invalid-feedback"},"First and Last Name required")),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",{for:"email"},"Email address"),i.a.createElement("input",{type:"email",className:this.emailClass(),id:"email",placeholder:"your@email.address",value:this.state.email,onChange:this.handleEmailChange}),i.a.createElement("div",{className:"invalid-feedback"},"Email address must be valid")),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",{for:"giving"},"Monthly Amount"),i.a.createElement("input",{type:"number",className:this.givingClass(),id:"giving",placeholder:"25",value:this.state.giving,onChange:this.handleGivingChange}),i.a.createElement("div",{className:"invalid-feedback"},"Enter the amount to give monthly")),i.a.createElement(u.StripeProvider,{apiKey:"pk_live_x7LcxFZe7RAdLg0yqViyOrNs"},i.a.createElement(u.Elements,null,i.a.createElement(b,{handleResult:this.updateToken})))),i.a.createElement("div",{id:"page2",className:this.page2Style()},i.a.createElement("div",{class:"form-group"},i.a.createElement("label",{for:"street"},"Street Address"),i.a.createElement("input",{type:"text",className:this.streetClass(),id:"street",placeholder:"123 Main st",value:this.state.street,onChange:this.handleStreetChange}),i.a.createElement("div",{className:"invalid-feedback"},"Enter a valid Address")),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",{for:"city"},"City"),i.a.createElement("input",{type:"text",className:this.cityClass(),id:"city",placeholder:"Salem",value:this.state.city,onChange:this.handleCityChange}),i.a.createElement("div",{className:"invalid-feedback"},"City is required")),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",{for:"province"},"State"),i.a.createElement("input",{type:"text",className:this.provinceClass(),id:"province",placeholder:"OR",value:this.state.province,onChange:this.handleProvinceChange}),i.a.createElement("div",{className:"invalid-feedback"},"Abbreviate the state with 2 letters")),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",{for:"zip"},"Zipcode"),i.a.createElement("input",{type:"tel",className:this.zipClass(),id:"zip",placeholder:"97309",value:this.state.zip,onChange:this.handleZipChange}),i.a.createElement("div",{className:"invalid-feedback"},"Zipcode should be 5 digits")),i.a.createElement("input",{type:"button",value:"Back",className:"btn btn-primary btn-padding",onClick:this.handleBack}),i.a.createElement("input",{type:"submit",value:"Done",className:"btn btn-primary btn-padding",onClick:this.handleSubmit})))),i.a.createElement(f,{show:this.state.modal,handleClose:this.hideModal},i.a.createElement("p",{className:"card-status"},this.state.modalStatus)))}}]),t}(i.a.Component),g=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.stripe?this.props.stripe.createToken().then(this.props.handleResult):console.log("stripe not mounted")}},{key:"handleChange",value:function(e){}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},i.a.createElement("div",{class:"form-group",id:"card-data"},i.a.createElement("label",{className:"wide-label"},"Payment Card"),i.a.createElement(u.CardElement,{className:"form-control",onChange:this.handleChange,hidePostalCode:!0})),i.a.createElement("input",{type:"submit",value:"Next",className:"btn btn-primary",onClick:this.handleNext}))}}]),t}(i.a.Component),b=Object(u.injectStripe)(g),f=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(h.a)(t).call(this,e))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"showModal",value:function(){return this.props.show?"modal display-block":"modal display-none"}},{key:"render",value:function(){return i.a.createElement("div",{className:this.showModal()},i.a.createElement("section",{className:"modal-main"},this.props.children,i.a.createElement("button",{className:"btn btn-primary",onClick:this.props.handleClose},"OK")))}}]),t}(i.a.Component),y=v;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,2,1]]]);
//# sourceMappingURL=main.e893756e.chunk.js.map